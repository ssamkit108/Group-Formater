<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="ISO-8859-1">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/css/general.css">
<script type="text/javascript" src="/js/courseci-message.js"></script>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<title>QuestionManager</title>
<style>
h1 {
	text-align: center;
}
</style>
</head>
<body>
	<section>
		<div th:replace="header :: header"></div>
	</section>
	<br>
	<section>
		<div class="container">
			<div class="row" style="margin-top: 20px">
				<h1>Question Manager Page</h1>
			</div>
			<hr>

			<div class="row justify-content-center">
				<section>
					<div class="container" style="margin-bottom: 25px">

						
						<div th:if="${errormessage ne null}"
							class="row alert alert-danger alert-dismissible">
			
							<div class="col-lg-8">
								<strong>Error! </strong> <span th:text='${errormessage}'></span>
							</div>
							<div style="float: right;">
								<a href="#" class="close" data-dismiss="alert" aria-label="close"
									style="float: right;">&times;</a>
							</div>
						</div>
						<div th:if="${message ne null}"
							class="row alert alert-success alert-dismissible">
			
							<div class="col-lg-8">
								<strong>Success! </strong> <span th:text='${message}'></span>
							</div>
							<div style="float: right;">
								<a href="#" class="close" data-dismiss="alert" aria-label="close"
									style="float: right;">&times;</a>
							</div>
						</div>
						

						<div class="row">

							<div class="col-md-4 m-auto justify-content-right">
								<a class="btn btn-primary"
									th:href="@{/questionmanager/question}">Create New Question</a>
							</div>

							<div class="col-md-4 m-auto justify-content-centre"></div>
							<form action="#" th:action="@{/questionmanager}"
								th:object="${questionList}" method=post>

								<div class="col-md-4 m-auto justify-content-left">


									<!-- <input type="hidden" th:value="${questionList}"
										name="questionList" /> -->
									<button type="submit" class="btn btn-primary" name="action"
										value="sortbytitle">Sort by Title</button>

									<input type="hidden" th:value="${questionList}"
										name="questionList" />
									<button type="submit" class="btn btn-primary" name="action"
										value="sortbydate" style="float: right">Sort by Date</button>
								</div>

							</form>
						</div>
					</div>
				</section>
				<table class="table table-bordered">
					<thead class="dark">
						<tr>
							<th>Question Title</th>
							<th>Question Text</th>
							<th>Date created</th>
							<th>Action</th>
						</tr>
					</thead>
					<tbody>
						<tr th:if="${questionList.empty}">
							<td colspan="2">No Courses Available</td>
						</tr>
						<tr th:each="ques : ${questionList}">
							<td th:text="${ques.questionTitle}"></td>
							<td th:text="${ques.questionText}"></td>
							<td th:text="${ques.creationDate}"></td>
							<td>

								<form
									onSubmit="return confirm('Are you sure you want to delete this Question?')"
									action="#"
									th:action="@{/questionmanager/delete(question=${ques.questionId})}"
									method="post">

									<button type="submit" class="btn btn-danger btn-sm"
										name="action" value="remove">Delete</button>
								</form>
							</td>
						</tr>
					</tbody>
				</table>




			</div>
		</div>

	</section>



</body>
</html>